<script src="/assets/js/award_modal4.js"></script>

<script>
	function vote(type, upvote, downvote, scoretext) {
		upvote = document.getElementById(upvote);
		downvote = document.getElementById(downvote);
		scoretext = document.getElementById(scoretext);
		var score = Number(scoretext.textContent);

		if (type == "1") {
			if (upvote.classList.contains('active')) {
				upvote.classList.remove('active')
				scoretext.textContent = score - 1
				votedirection = "0"
			} else if (downvote.classList.contains('active')) {
				upvote.classList.add('active')
				downvote.classList.remove('active')
				scoretext.textContent = score + 2
				votedirection = "1"
			} else {
				upvote.classList.add('active')
				scoretext.textContent = score + 1
				votedirection = "1"
			}

			if (upvote.classList.contains('active')) {
				scoretext.classList.add('score-up')
				scoretext.classList.remove('score-down')
				scoretext.classList.remove('score')
			} else if (downvote.classList.contains('active')) {
				scoretext.classList.add('score-down')
				scoretext.classList.remove('score-up')
				scoretext.classList.remove('score')
			} else {
				scoretext.classList.add('score')
				scoretext.classList.remove('score-up')
				scoretext.classList.remove('score-down')
			}
		}
		else {
			if (downvote.classList.contains('active')) {
				downvote.classList.remove('active')
				scoretext.textContent = score + 1
				votedirection = "0"
			} else if (upvote.classList.contains('active')) {
				downvote.classList.add('active')
				upvote.classList.remove('active')
				scoretext.textContent = score - 2
				votedirection = "-1"
			} else {
				downvote.classList.add('active')
				scoretext.textContent = score - 1
				votedirection = "-1"
			}

			if (upvote.classList.contains('active')) {
				scoretext.classList.add('score-up')
				scoretext.classList.remove('score-down')
				scoretext.classList.remove('score')
			} else if (downvote.classList.contains('active')) {
				scoretext.classList.add('score-down')
				scoretext.classList.remove('score-up')
				scoretext.classList.remove('score')
			} else {
				scoretext.classList.add('score')
				scoretext.classList.remove('score-up')
				scoretext.classList.remove('score-down')
			}
		}

		var xhr = new XMLHttpRequest();
		xhr.open("POST", "/vote/" + type + "/" + id + "/" + votedirection, true);
		var form = new FormData()
		form.append("formkey", formkey());
		xhr.withCredentials=true;
		xhr.send(form);
		}
</script>

<div class="modal fade" id="awardModal" tabindex="-1" role="dialog" aria-labelledby="awardModalTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Give Award</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true"><i class="far fa-times"></i></span>
				</button>
			</div>
			<div id="awardModalBody" class="modal-body">
				<form id="awardTarget" class="pt-3 pb-0" action="" method="post">
					<div class="card-columns award-columns awards-wrapper">
						{% for award in v.user_awards %}
							{% if award.owned %}
								<a href="javascript:void(0)" id="{{award.kind}}" class="card" onclick="bruh('{{award.kind}}')">
							{% else %}
								<a href="javascript:void(0)" id="{{award.kind}}" class="card disabled">
							{% endif %}
								<i class="{{award.icon}} {{award.color}}"></i><br />
								<span class="pt-2" style="font-weight: bold; font-size: 14px; color:#E1E1E1">{{award.title}}</span>
								<div class="text-muted">{{award.owned}} owned</div>
							</a>
						{% endfor %}
					</div>
					<label for="note" class="pt-4">Note (optional):</label>
					<input id="kind" name="kind" value="" hidden>
					<textarea id="note" name="note" class="form-control" placeholder="Note to include in award notification"></textarea>
					<input id="giveaward" class="btn btn-primary" style="float:right" type="submit" value="Give Award" disabled>
				</form>
			</div>
		</div>
	</div>
</div>

<style>
	.awards-wrapper input[type="radio"] {
		display: none;
	}

	.awards-wrapper a {
		cursor: pointer;
		padding: 15px !important;
		text-align: center;
		text-transform: none!important;
	}

	.awards-wrapper a i {
		font-size: 45px;
	}

	.awards-wrapper a.disabled {
		opacity: 0.6;
	}

	.awards-wrapper a:hover, .picked {
		background-color: var(--primary)!important;
	}

	.awards-wrapper input[type="radio"]:checked+a {
		background-color: var(--primary)!important;
	}

	@media (min-width: 767.98px) {
		.award-columns {
			column-count: 3 !important;
		}
	}
</style>